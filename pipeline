#!groovy

pipeline {
    agent any

    environment {
        PATH="/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin"
    }
    tools {
				go 'go 1.13'
    }

    stages{

        stage ("Anisble deployment"){
            steps {
                dir("${env.WORKSPACE}"){
                    echo "Start deployment"
                    sh """
                    set +x
                    cd /home/ubuntu
                    ansible --version
                    ansible-playbook --version
                    set -x
                    """
                    echo "Done"
                }
            }
        }

        stage ("Build Environment"){
            steps {
                        echo "Testing Go Code"
                        /**
                         * Since glide is installed, glide novendor or nv for short can be taken advantage of to list all
                         * files to test sans vendored dependencies.
                         */
                        sh 'go version'
                }
            }
        }
    }